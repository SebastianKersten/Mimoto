!function(e){"use strict";var n=1,r={},t={_setEntry:function(e,t){var i=e.__pubSubUID;return i||(i=n++,e.__pubSubUID=i,r[i]={obj:e}),r[i][t]||(r[i][t]=[]),r[i]},_getEntryProp:function(e,n){var t=r[e.__pubSubUID];return t?r[e.__pubSubUID][n]:null},_clearEntry:function(e){var n=r[e.__pubSubUID];!n||n.subscriptions&&n.subscriptions.length||n.receivers&&n.receivers.length||(n.subscriptions=null,n.receivers=null,n.obj=null,delete r[e.__pubSubUID],e.__pubSubUID=null)},subscribe:function(e,n,r){for(var t,i=this._setEntry(e,"subscriptions"),s=0,u=i.subscriptions,o=u.length;o>s;s++)if(t=u[s],t.type===n&&t.fn===r)return;u.push({type:n,fn:r})},unsubscribe:function(e,n,r){var t=this._getEntryProp(e,"subscriptions");if(t){for(var i,s=t.length;--s>=0;)i=t[s],i.type!==n||i.fn!==r&&r||t.splice(s,1);t.length||this._clearEntry(e)}},publishAsync:function(e,n,r){var t=this;setTimeout(function(){t.publish(e,n,r)},0)},publish:function(e,n,r){for(var t,i=this._setEntry(e,"subscriptions"),s=[],u=0,o=i.subscriptions,c=o.length,l=i.receivers;c>u;u++)t=o[u],t.type===n&&s.push(t);for(c=s.length,u=0;c>u;u++)s[u].fn(r);if(l&&(l.length||o.length)||this._clearEntry(e),l)for(c=l.length,u=0;c>u;u++)this.publish(l[u],n,r)},inform:function(e,n){if(!e||!n)return!1;var r=this._setEntry(e,"receivers");return r.receivers.push(n),!0},conceal:function(e,n){if(!e||!n)return!1;var r=this._getEntryProp(e,"receivers");if(!r)return!1;for(var t,i=r.length,s=!1;--i>=0;)t=r[i],t===n&&(r.splice(i,1),s=!0);return r.length||this._clearEntry(e),s}};"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):e.Observer=t}(this);