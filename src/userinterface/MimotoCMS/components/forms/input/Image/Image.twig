{% set sImagefieldId = Mimoto.meta('type')~"."~Mimoto.meta('id') %}
{% set sFlatImageFieldId = Mimoto.meta('type')~Mimoto.meta('id') %}

{% embed "MimotoCMS/components/forms/FormField.twig" with {"type": "image", button:true, buttonLabel:'Upload image', buttonIcon:'', buttonAttribute:'data-mimoto-form-input-image-trigger' } %}

    {% block input %}
        <div data-mimoto-form-input-image-trigger class="MimotoCMS_forms_input_ImageUpload-fulltrigger">
            <div data-mimoto-form-input-image-upload class="MimotoCMS_forms_input_ImageUpload">
                <div class="MimotoCMS_forms_input_ImageUpload-trigger">
                    <div class="MimotoCMS_forms_input_ImageUpload-trigger-button"><svg class="MimotoCMS_forms_input_ImageUpload-button-trigger-icon"><use xlink:href="#ico-plus"></use></svg></div>
                    <p class="MimotoCMS_forms_input_ImageUpload-trigger-text">Click here or drop an image</p>
                </div>

                <div data-mimoto-form-input-image-preview class="MimotoCMS_forms_input_ImageUpload-preview">
                    <div data-mimoto-form-input-image-template class="MimotoCMS_forms_input_ImageUpload-preview-template">
                        <img data-dz-thumbnail class="MimotoCMS_forms_input_ImageUpload-preview-image" />
                        <div class="MimotoCMS_forms_input_ImageUpload-preview-upload-progress">
                            <div data-dz-uploadprogress class="MimotoCMS_forms_input_ImageUpload-preview-upload-progess-bar"></div>
                        </div>
                    </div>
                </div>

                <img data-mimoto-form-input-image-persistent class="MimotoCMS_forms_input_ImageUpload-new-preview-image" src="">
            </div>

            <input {{ Mimoto.input() }} type="hidden" value="{{ Mimoto.value() }}"/>

        </div>
        <div data-mimoto-form-input-image-remove class="MimotoCMS_forms_input_ImageUpload-delete {% if Mimoto.value() is empty %}hidden{% endif %}">Remove image</div>
    {% endblock %}

{% endembed %}
